<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<th:block layout:fragment="customTitle">
	<title>학생상담관리</title>
</th:block>

<th:block layout:fragment="customContents">
	<!-- <div class="page-header"> -->
		<div class="col-md-10 col-md-offset-3">
			<h3>학생상담관리</h3>
			<label>[[${'생일: ' + studentInfo.memberBirth + '인 ' + studentInfo.memberName + '학생 상담관리'}]]</label>
		</div>
	<!-- </div> -->
	
	
	<div class="col-sm-10 col-md-offset-3">
		<form class="form-inline mx-auto" action="/searchStudentInfo" method="post">
			<input type="hidden" th:value="${memberId}" name="memberId">
			<div class="form-group">
				<label class="sr-only" for="viewCounselTypeNameList">상담구분명</label>
				<!-- <div class="input-group"> -->
				<select id="viewCounselTypeNameList" name="counselHistoryNo"
						class="form-control"><!-- th:each="counselType : ${counselTypeList}" -->
					<option  value="전화상담구분코드">전화상담</option>
					<!-- th:value="${counselType.counselTypeNo}" -->
					<!-- th:text="${counselType.counselTypeName}" -->
					<option value="방문상담구분코드">방문상담</option>
				</select>
				<!-- </div> -->
			</div>
			
			<div class="form-group">
				<label class="sr-only" for="viewCounselResultNameList">상담결과명</label>
				<!-- <div class="input-group"> -->
				<select id="viewCounselResultNameList" name="counselResultNo"
						class="form-control"><!-- th:each="counselType : ${counselResultList}" -->
					<option value="입학상담구분코드">입학상담</option>
					<!-- th:value="${counselType.counselTypeNo}" -->
					<!-- th:text="${counselType.counselTypeName}" -->
					<option value="일반상담구분코드">일반상담</option>
				</select>
				<!-- </div> -->
			</div>
			<button type="submit" class="btn btn-default">검색</button>
		</form>
		
		
		<!-- ${#strings.containsIgnoreCase(counselHistoryList.counselResultName,'입학상담')}
			 상담 기록 중 입학상담이라는 명칭이 없다면 -->
		<div class="row" th:if="${counselHistoryList eq null}">
		<!-- 상담 기록이 없다면 - 어차피 학원 등록할때 처음 상담테이블에 입력하는 상담이 입학상담이다. -->
			<div class="col-md-3" >
				<table class="table">
					<tbody>
						<tr>
							<td>
								<button type="button" class="btn btn-primary btn-sm btn-block"
										onclick="">입학상담</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		
		<div class="row">
			<div class="col-md-6">
				<h4>상담내역</h4>
				
				<table class="table table-striped">
					<thead>
						<tr>
							<th>번호</th>
							<th>구분</th>
							<th>결과</th>
							<th>상담내용</th>
							<th>상담일</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="counsel, lists : ${counselHistoryList}"
							th:if="${counselHistoryList != null}">
							<td th:text="${lists.count}"></td>
							<td th:text="${counsel.counselTypeName}"></td>
							<td th:text="${counsel.counselResultName}"></td>
							<td th:text="${#strings.abbreviate(counsel.counselContent, 9)}"></td>
							<td th:text="${counsel.counselAppointmentDate}"></td>
						</tr>
						
						<tr th:unless="${counselHistoryList != null}">
							<td colspan="5">등록된 상담 내역이 없습니다.</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-md-6">
				<h4>상담신청현황</h4>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>번호</th>
							<th>구분</th>
							<th>결과</th>
							<th>신청일</th>
							<th>예약여부</th>
							<th>예약</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="counsel, lists : ${counselAppointmentList}" th:if="${counselAppointmentList != null}">
							<td th:text="${lists.count}"></td>
							<td th:text="${counsel.counselTypeName}"></td>
							<td th:text="${counsel.counselResultName}"></td>
							<td th:text="${counsel.counselAppointmentDate}"></td>
							<td th:text="${counsel.counselAppointmentWhether}"></td>
							<td>
								<button type="button" class="btn btn-primary btn-sm btn-block"
										onclick="">예약하기</button>
							</td>
						</tr>
						
						<tr th:unless="${counselAppointmentList != null}">
							<td colspan="5">신청받은 상담예약현황이 없습니다.</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</th:block>

<th:block layout:fragment="customScript">
</th:block>

</html>